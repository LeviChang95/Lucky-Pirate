<!doctype html>
<html>
<head>
    <script src="https://pixijs.download/release/pixi.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<h1>Lucky Pirate</h1>
Welcome to lucky pirate a pirate themed gambling game. Find the treasure chests filled with <b id="gold">gold</b> but avoid the <b id="skulls">skulls</b> or loose your fortune!
<br>

<div>
    <h2>Rules</h2>
    Tap the start button to begin and enter a wager. Gold pieces will be hidden amoungst the treasure chests, the total value of which will always be double your origional wager.
    Tap a chest to open it winning the gold inside. However two skulls are hidden amoungst the gold, if you tap a skull you loose the game and all the money you won.
    You can stop playing at any time using the X button.
</div>

<script type="module">
    //import{Sprite,Assets} from 'pixi.js';
    // Create the application helper and add its render target to the page
    const app = new PIXI.Application();
    const decorations = [];
    let elapsed = 0.0;

    async function setup(){
        await app.init({ width: 640, height: 360 })
        document.body.appendChild(app.canvas);
    }

    async function preload(){
        await PIXI.Assets.load("images/tempBackground.jpg"); //upklyak on Freepik
        await PIXI.Assets.load("images/crab.png")
    }

    export function addBackground(){
        let background = PIXI.Sprite.from("images/tempBackground.jpg");
        background.width = 640;
        background.height = 360;
        app.stage.addChild(background);
    }

    export function addDecorations(){
        let sprite = PIXI.Sprite.from("images/crab.png");
        app.stage.addChild(sprite);
        sprite.variableScale = 0.25;
        sprite.y = 300;
        sprite.scale.y = sprite.variableScale;
        decorations.push(sprite);
    }

    export function animate(time,sprite){
        let delta = time.deltaTime;
        elapsed += delta;
        sprite.x = 200.0 + Math.cos(elapsed/50.0) * 100.0
        sprite.anchor.x = 0.5;
        if(((elapsed/50.0)%(2*Math.PI))<Math.PI)
             sprite.scale.x = sprite.variableScale;
         else
             sprite.scale.x = -sprite.variableScale;
    }



    (async () =>
    {
        await setup();
        await preload();
        addBackground();
        addDecorations();

        app.ticker.add((time) =>
        {
            animate(time,decorations[0]);
        });
    })();

</script>
</body>
</html>